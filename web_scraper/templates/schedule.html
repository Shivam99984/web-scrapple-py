{% extends "base.html" %}
{% block content %}
  <h2>Schedule a Scraping Task</h2>
  {% if message %}
    <p class="message">{{ message }}</p>
  {% endif %}
  <form method="post">
    <label for="url">Website URL:</label>
    <input type="text" id="url" name="url" placeholder="https://example.com" required><br><br>
    
    <label for="selector">CSS Selector:</label>
    <input type="text" id="selector" name="selector" placeholder="e.g. .content, #main" required><br><br>
    
    <label for="scheduled_time">Scheduled Time:</label>
<!-- HTML5 datetime-local input -->
<input type="datetime-local" id="scheduled_time" name="scheduled_time" required><br><br>

    
    <button type="submit">Schedule Task</button>
  </form>
  
  <h3>Scheduled Jobs</h3>
  {% if jobs %}
    <ul>
    {% for job in jobs %}
      <li>
        {{ job.job_id }}: URL: {{ job.url }}, Selector: {{ job.selector }},
        Scheduled For: {{ job.next_run }}, Created At: {{ job.created_at }}
        <form method="post" action="{{ url_for('delete_job', job_db_id=job.id) }}" style="display:inline;">
          <button type="submit">Remove</button>
        </form>
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p>No scheduled jobs.</p>
  {% endif %}
{% endblock %}
